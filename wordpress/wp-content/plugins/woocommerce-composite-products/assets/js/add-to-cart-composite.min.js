jQuery(document).ready(function(a){function b(b){var c=b.find(".attribute-options"),d=c.length,e="";return 0==d?"":(c.each(function(b){var c=a(this).find("select").val();return""===c?(e="",!1):(e=e+a(this).data("attribute_label")+": "+a(this).find("select option:selected").text(),void(b!==d-1&&(e+=", ")))}),e)}function c(b){var c=b.find(".component_filters"),d=c.find(".component_filter"),e=!0;return 0==d.length?!1:(d.each(function(){0==a(this).find(".component_filter_option.selected").length?a(this).removeClass("active"):(a(this).addClass("active"),e=!1)}),void(e?c.removeClass("filtered"):c.addClass("filtered")))}function d(b){var c=b.find(".component_filters"),d={};return 0==c.length?d:(c.find(".component_filter_option.selected").each(function(){var b=a(this).closest(".component_filter").data("filter_type"),c=a(this).closest(".component_filter").data("filter_id"),e=a(this).data("option_id");b in d?c in d[b]?d[b][c].push(e):(d[b][c]=[],d[b][c].push(e)):(d[b]={},d[b][c]=[],d[b][c].push(e))}),d)}function e(b,c){var d=b.find(".component_selections"),e=b.find(".component_options"),f=e.find(".component_options_inner"),g=b.find(".component_pagination"),h=b.closest(".composite_form"),i=e.outerHeight(),j=0,l=!1;if(b.hasClass("disabled"))return!1;var m=function(){window.setTimeout(function(){l?e.animate({height:j},{duration:200,queue:!1,always:function(){e.css({height:"auto"}),d.unblock().removeClass("blocked_content refresh_component_options")}}):d.unblock().removeClass("blocked_content refresh_component_options")},250)};d.addClass("blocked_content").block(M),a.post(woocommerce_params.ajax_url,c,function(n){try{if("success"===n.result){d.addClass("refresh_component_options"),e.css("height",i);var o=e.find(".component_options_select").val();f.html(a(n.options_markup).find(".component_options_inner").html());var p=f.find("img"),q=function(){if(p.length>0){var b=!1;p.each(function(){var c=a(this);return 0===c.height()?(b=!0,!1):void 0}),b?window.setTimeout(function(){q()},100):r()}else r()},r=function(){n.pagination_markup?(g.html(a(n.pagination_markup).html()),g.slideDown(200)):g.slideUp(200);var d=h.find(".composite_data").data("scenario_data");d.scenario_data[c.component_id]=n.component_scenario_data;var p=e.find(".component_options_select").val();o>0&&(""===p||"undefined"==typeof p)?e.find(".component_options_select").change():(A(b),k(b)),b.trigger("wc-composite-component-options-loaded"),e.css("height","auto"),j=f.outerHeight(),Math.abs(j-i)>1&&(l=!0,e.css("height",i)),m()};q()}else e.css("height",i),f.html(n.options_markup)}catch(s){console.log(s),m()}},"json")}function f(b,c){var d=b.closest(".composite_form"),e=d.find(".composite_data").data("bto_style");if("undefined"==typeof c&&(c=!0),"paged"===e&&c){var f=d.find(".scroll_show_component");if(d.find(".multistep.active").animate({opacity:0},{duration:200,queue:!1}),f.length>0&&!f.is_in_viewport(!0)){var g=f.hasClass("scroll_bottom")?a(window).height()-80:50;a("html, body").animate({scrollTop:f.offset().top-g},{duration:200,queue:!1})}b.hasClass("cart")?a(".widget_composite_summary").animate({opacity:0},{duration:200,queue:!1}):(a(".widget_composite_summary").slideDown(200),a(".widget_composite_summary").animate({opacity:1},{duration:200,queue:!1})),window.setTimeout(function(){b.hasClass("cart")&&a(".widget_composite_summary").slideUp(200),h(b),x(b),A(b),k(b),b.css({opacity:0}),b.animate({opacity:1},{duration:100})},220)}else h(b),x(b),("paged"===e||"progressive"===e)&&A(b),k(b),"progressive"===e&&c&&b.hasClass("autoscrolled")&&window.setTimeout(function(){var c=b;c.length>0&&!b.is_in_viewport(!1)&&a("html, body").animate({scrollTop:c.offset().top},{duration:200,queue:!1})},220);b.trigger("wc-composite-show-component")}function g(a){var b=a.find(".component_data").data("product_type"),c=a.find(".component_summary > .content");"variable"==b?(c.hasClass("cart")||c.addClass("cart"),c.hasClass("variations_form")||c.addClass("variations_form"),A(a),c.wc_variation_form(),c.find(".variations select").change()):"bundle"==b?(c.hasClass("bundle_form")||c.addClass("bundle_form"),c.find(".bundle_data").wc_pb_bundle_form()):c.hasClass("cart")||c.addClass("cart")}function h(a){var b=a.closest(".composite_form"),c=b.find(".composite_data").data("bto_style"),d=b.find(".composite_data").data("bto_style_variation"),e=b.find(".multistep.active");"progressive"!==c&&e.hide(),b.children(".multistep.active, .multistep.next, .multistep.prev").removeClass("active next prev"),a.addClass("active"),"progressive"!==c&&a.show();var f=a.next(),g=a.prev();"paged"===c&&"componentized"===d&&(f=b.find(".multistep.cart"),g=b.find(".multistep.cart")),f.hasClass("multistep")&&f.addClass("next"),g.hasClass("multistep")&&g.addClass("prev"),a.trigger("wc-composite-set-active-component")}function i(a){var b=a.find(".component_options select.component_options_select").val(),c=a.find(".component_content .component_summary .component_wrap .out-of-stock").length,d=a.find(".component_data").data("product_type");return b>0&&0==c?"variable"==d?""!=a.find('.variations_button input[name="variation_id"]').val()?!0:!1:"simple"==d||"none"==d?!0:1==a.find(".component_data").data("component_set")?!0:!1:""===b&&j(a)?!0:!1}function j(a){var b=a.closest(".composite_form"),c=a.attr("data-item_id"),d=b.find(".composite_data").data("active_scenarios"),e=z(b),f=e[c];if(0 in f){if("undefined"==typeof d)return console.log("Warning: Composite not initialized properly: breaking out..."),!1;var g=f[0],h=L(d,g);return h.length>0?!0:!1}return!1}function k(a){m(a),l(a)}function l(b){var c=b.closest(".composite_form"),d=(c.find(".composite_data").data("bto_style"),c.find(".composite_pagination")),e=a.merge(c.find(".composite_summary"),a(".widget_composite_summary")),f=!1;return 0==d.length&&0==e.length?!1:void c.children(".multistep").each(function(b){var c=a(this),g=c.prev(),h=c.next(),j=c.attr("data-item_id"),k=c.hasClass("first")||h.hasClass("first")||i(g);if(k||(f=!0),d.length>0){var l=d.find(".pagination_element_"+j),m=l.find(".element_link");c.hasClass("active")?(m.addClass("inactive"),l.addClass("pagination_element_current")):f?(m.addClass("inactive"),l.removeClass("pagination_element_current")):(m.removeClass("inactive"),l.removeClass("pagination_element_current"))}if(e.length>0){var n=e.find(".summary_element_"+j),o=n.find(".summary_element_link");c.hasClass("active")?(o.removeClass("disabled"),o.addClass("selected"),n.find(".summary_element_selection_prompt").slideUp(200)):(n.find(".summary_element_selection_prompt").slideDown(200),f||c.hasClass("blocked")&&(!g.hasClass("active")||!k)?(o.removeClass("selected"),o.addClass("disabled")):(o.removeClass("disabled"),o.removeClass("selected")))}})}function m(a){var b=a.closest(".composite_form"),c=b.find(".composite_data").data("bto_style"),d=b.find(".composite_data").data("bto_style_variation"),e=!1;if("single"==c)return!1;if(!a.hasClass("active"))return!1;if(i(a)||"componentized"===d&&a.hasClass("component")?(p(a),e=!0):q(a),"progressive"===c){var f=b.find(".composite_navigation.progressive"),g=a.find(".composite_navigation.progressive"),h=b.find(".component.next");0==g.length?(f.css({visibility:"hidden"}),f.slideUp({duration:200,queue:!1,always:function(){f.appendTo(a.find(".component_inner")).css({visibility:"visible"}),a.hasClass("last")||h.hasClass("toggled")&&e||f.slideDown(200)}})):a.hasClass("last")||h.hasClass("toggled")&&e?f.css({visibility:"hidden"}).slideUp(200):f.css({visibility:"visible"}).slideDown(200)}}function n(c){var d=c.find(".composite_summary"),e=c.find(".composite_data").data("price_data");if(0==d.length)return!1;c.find(".component").each(function(){var c=a(this),f=c.attr("data-item_id"),g=d.find(".summary_element_"+f),h=g.find(".summary_element_wrapper"),k=g.find(".summary_element_wrapper_inner"),l=c.find(".component_data").data("product_type"),m=c.find("#component_options_"+f).val(),n=parseInt(c.find(".component_wrap input.qty").val()),p="",q="",r="",s="",t="",u="",v=k.outerHeight();if(h.css("height",v),"none"===l)j(c)&&(p=a("#component_options_"+f+" option.none").data("title"));else if("variable"===l)m>0&&(n>0||0===n)&&(s=a("#component_options_"+f+" option:selected").data("title"),t=" <strong>&times; "+n+"</strong>",u=b(c.find(".variations")),u&&(u=" ("+u+")"),p=s+u+t,r=c.find("#component_options_"+f+" option:selected").data("image_src"));else if("bundle"===l){if(m>0&&(n>0||0===n)){var w="",x=0;c.find(".bundled_product .cart").each(function(b){a(this).data("quantity")>0&&x++}),0==x?p=wc_composite_params.i18n_none:(c.find(".bundled_product .cart").each(function(c){if(a(this).data("quantity")>0){var d=b(a(this).find(".variations"));d&&(d=" ("+d+")"),w=w+a(this).data("title")+d+" <strong>&times; "+parseInt(a(this).data("quantity")*n)+"</strong></br>"}}),p=w),r=c.find("#component_options_"+f+" option:selected").data("image_src")}}else m>0&&(s=a("#component_options_"+f+" option:selected").data("title"),t=isNaN(n)?"":"<strong>&times; "+n+"</strong>",p=s+" "+t,r=c.find("#component_options_"+f+" option:selected").data("image_src"));if(q=p?c.hasClass("static")?'<a href="">'+wc_composite_params.i18n_summary_static_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_filled_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_empty_component+"</a>",g.find(".summary_element_selection").html(p?'<span class="summary_element_content">'+p+'</span><span class="summary_element_content summary_element_selection_prompt">'+q+"</span>":'<span class="summary_element_content summary_element_selection_prompt">'+q+"</span>"),a(this).hasClass("active")&&g.find(".summary_element_selection_prompt").hide(),o(g,r),e.per_product_pricing===!0&&m>0&&n>0&&i(c)){var y=(parseFloat(e.prices[f])+parseFloat(e.addons_prices[f]))*n,z=(parseFloat(e.regular_prices[f])+parseFloat(e.addons_prices[f]))*n,A=J(K(y)),B=J(K(z));g.find(".summary_element_price").html(z>y?'<span class="price summary_element_content"><del>'+B+"</del> <ins>"+A+"</ins></span>":'<span class="price summary_element_content">'+A+"</span>")}else g.find(".summary_element_price").html("");c.trigger("wc-composite-component-update-summary-content"),h.animate({height:k.outerHeight()},{duration:200,queue:!1,always:function(){h.css({height:"auto"})}})});var f=a(".widget_composite_summary_content");if(f.length>0){var g=d.find(".summary_elements").clone();g.find(".summary_element_wrapper").css({height:"auto"}),g.find(".summary_element").css({width:"100%"}),g.find(".summary_element_selection_prompt").remove(),f.html(g)}}function o(a,b){var c=a.find(".summary_element_image img");if(0==c.length||c.hasClass("norefresh"))return!1;var d=c.attr("data-o_src");b?("undefined"==typeof d&&(d=c.attr("src")?c.attr("src"):"",c.attr("data-o_src",d)),c.attr("src",b)):"undefined"!=typeof d&&c.attr("src",d)}function p(a){var b=a.closest(".composite_form"),c=b.find(".composite_navigation"),d=b.find(".multistep.next"),e=b.find(".component.prev"),f=b.find(".composite_data").data("bto_style_variation");c.find(".next").addClass("invisible"),c.find(".prev").addClass("invisible"),d.length>0&&"componentized"!==f?(c.find(".next").html(wc_composite_params.i18n_next_step.replace("%s",d.data("nav_title"))),c.find(".next").removeClass("invisible"),d.hasClass("toggled")&&d.find(".component_title").removeClass("inactive")):(b.find(".composite_navigation.paged .next").html(wc_composite_params.i18n_final_step),b.find(".composite_navigation.paged .next").removeClass("invisible")),e.hasClass("component")&&(b.find(".composite_navigation.paged .prev").html(wc_composite_params.i18n_previous_step.replace("%s",e.data("nav_title"))),b.find(".composite_navigation.paged .prev").removeClass("invisible")),c.find(".prompt").html(""),c.find(".prompt").addClass("invisible")}function q(a){var b=a.closest(".composite_form"),c=b.find(".composite_navigation"),d=b.find(".multistep.next"),e=b.find(".component.prev");if(c.find(".prev").addClass("invisible"),c.find(".next").addClass("invisible"),d.hasClass("toggled")&&d.find(".component_title").addClass("inactive"),e.hasClass("component")){var f=e.find(".component_options select.component_options_select").val();(f>0||"0"===f||""===f&&j(e))&&(b.find(".composite_navigation.paged .prev").html(wc_composite_params.i18n_previous_step.replace("%s",e.data("nav_title"))),b.find(".composite_navigation.paged .prev").removeClass("invisible"))}a.hasClass("component")&&(a.hasClass("last")&&a.hasClass("progressive")||(c.find(".prompt").html(wc_composite_params.i18n_select_component_options.replace("%s",a.data("nav_title"))),c.find(".prompt").removeClass("invisible")))}function r(a,b){a.hasClass("closed")?(b.slideDown({duration:200,queue:!1,always:function(){a.removeClass("animating")}}),a.removeClass("closed").addClass("open animating")):(b.slideUp({duration:200,queue:!1}),a.removeClass("open").addClass("closed"))}function s(a){a.addClass("blocked"),a.hasClass("toggled")&&(a.hasClass("open")&&r(a,a.find(".component_inner")),a.find(".component_title").addClass("inactive"))}function t(a){a.hasClass("toggled")&&(a.hasClass("closed")&&r(a,a.find(".component_inner")),a.find(".component_title").removeClass("inactive")),a.removeClass("blocked")}function u(b,c){b.children(".component").each(function(b){b>c&&(a(this).hasClass("disabled")&&w(a(this)),s(a(this)))})}function v(a){a.find("select, input").addClass("disabled_input").prop("disabled","disabled"),a.addClass("disabled").trigger("wc-composite-disable-component-options");var b=a.find(".clear_component_options");b.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")}function w(a){a.find("select.disabled_input, input.disabled_input").removeClass("disabled_input").prop("disabled",!1),a.removeClass("disabled").trigger("wc-composite-enable-component-options");var b=a.find(".clear_component_options");b.html(wc_composite_params.i18n_clear_selection).removeClass("reset_component_options")}function x(a){var b=a.closest(".composite_form"),c=b.find(".composite_data").data("bto_style");if("progressive"!==c)return!1;var d=a.prev();v(d),w(a),t(a);var e=d.find(".clear_component_options");e.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")}function y(a){var b=a.find(".composite_data").data("scenario_data");return b.scenarios}function z(a){var b=a.find(".composite_data").data("scenario_data");return b.scenario_data}function A(b){var c=b.attr("data-item_id"),d=b.closest(".composite_form"),e=c,f=d.find(".composite_data").data("bto_style"),g=d.find(".composite_data").data("bto_selection_mode"),h=d.find(".component").index(b);b.hasClass("cart")&&(h=1e3);var i=y(d),j=[];if("yes"===wc_composite_params.script_debug&&(console.log("\nSelections update triggered by "+b.data("nav_title")+" at "+(new Date).getTime().toString()+"..."),console.log("\nCalculating active scenarios...")),d.children(".component").each(function(b){if("progressive"==f||"paged"==f){if(b>h)return!0;j=i}var c=a(this),k=c.find(".component_options select.component_options_select").val(),l=c.attr("data-item_id"),m=c.find(".component_data").data("product_type");if(null===c.find(".component_options select.component_options_select").val())return c.find(".component_options select.component_options_select").val("").addClass("reset"),!1;if(k>=0&&(e!=l||"thumbnails"==g||"progressive"==f||"paged"==f)){var n=z(d),o=n[l];if(""===k){if(!(0 in o))return!0;k="0"}var p=o[k];if("yes"===wc_composite_params.script_debug&&console.log("Selection #"+k+" of "+c.data("nav_title")+" in scenarios: "+p.toString()),"variable"==m){var q=c.find('.single_variation_wrap .variations_button input[name="variation_id"]').val();q>0&&e!=l&&(p=o[q],"yes"===wc_composite_params.script_debug&&console.log("Variation selection #"+q+" of "+l+" in scenarios: "+p.toString()))}var r=L(i,p);if(!(r.length>0))return"0"!==k?("yes"===wc_composite_params.script_debug&&console.log("Selection incompatible - breaking out and resetting..."),c.find(".component_options select.component_options_select").val("").addClass("reset")):"yes"===wc_composite_params.script_debug&&console.log("Selection incompatible - breaking out..."),!1;i=r}}),"yes"===wc_composite_params.script_debug&&console.log("\nUpdating selections..."),d.children(".component").each(function(b){var c=a(this),e=c.attr("data-item_id"),g=c.find(".component_summary > .content"),k=[];k="progressive"!=f&&"paged"!=f||h!=b?i:j,d.find(".composite_data").data("active_scenarios",k),"yes"===wc_composite_params.script_debug&&(console.log("Updating selections of "+c.data("nav_title")+"..."),console.log("	Active scenarios:"),console.log("	"+k.toString())),a(this).find(".component_options select.component_options_select option").each(function(){var b=a(this).val();if(b>=0&&""!==b){"yes"===wc_composite_params.script_debug&&console.log("	Updating selection #"+b+":");var f=z(d),g=f[e],h=g[b],i=!1;"yes"===wc_composite_params.script_debug&&console.log("		Selection in scenarios: "+h.toString());for(var j in h){var l=h[j];if(a.inArray(l,k)>-1){i=!0;break}}i?("yes"===wc_composite_params.script_debug&&console.log("		Selection enabled."),a(this).prop("disabled",!1).trigger("wc-composite-selection-compatible"),c.find("#component_option_thumbnail_"+a(this).val()).removeClass("disabled")):("yes"===wc_composite_params.script_debug&&console.log("		Selection disabled."),a(this).prop("disabled","disabled").trigger("wc-composite-selection-incompatible"),c.find("#component_option_thumbnail_"+a(this).val()).addClass("disabled"))}});var l=c.find(".component_data").data("product_type");if("variable"==l){var m=c.find(".component_data").data("product_variations"),n=[];for(var o in m){var p=z(d),q=p[e],r=q[m[o].variation_id],s=!1;for(var t in r){var u=r[t];if(a.inArray(u,k)>-1){s=!0;break}}if("yes"===wc_composite_params.is_wc_version_gte_2_3){var v=a.extend(!0,{},m[o]),w=!1;if(!s){v.variation_is_active=!1;for(var x in v.attributes)if(""===v.attributes[x]){w=!0;break}}w||n.push(v)}else s&&n.push(m[o])}g.data("product_variations",n)}}),"yes"===wc_composite_params.script_debug&&console.log("Finished updating component selections.\n\n"),b.find(".component_options select.component_options_select").hasClass("reset")){var k=b.find(".component_options select.component_options_select option").not('[disabled="disabled"], [value=""]');if(k.length>0,1)b.find(".component_options select.component_options_select").hasClass("resetting")||(b.find(".component_options select.component_options_select").addClass("resetting"),b.find(".component_options select.component_options_select").val("").change());else{var l=k.first();b.find(".component_options select.component_options_select").val(l.val()).change()}b.find(".component_options select.component_options_select").removeClass("reset"),b.find(".component_options select.component_options_select").removeClass("resetting")}var m=b.find(".component_data").data("product_type");if("variable"==m){var n=b.find(".component_summary > .content");B(n)||n.find(".variations select").val("").change()}}function B(b){var c={};b.find(".variations select").each(function(){var b=a(this).val();c[a(this).attr("name")]=b});var d=b.data("product_variations"),e=C(d,c),f=e.shift();return f?!0:!1}function C(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];D(e.attributes,b)&&c.push(e)}return c}function D(a,b){var c=!0;for(var d in a){var e=a[d],f=b[d];void 0!==e&&void 0!==f&&0!=e.length&&0!=f.length&&e!=f&&(c=!1)}return c}function E(a,b){var c=a.find(".composite_data");return c.data("composite_initialized")!==!0?!1:c.data("update_lock")===!0?!1:(c.data("update_lock",!0),void window.setTimeout(function(){F(a,b),c.data("update_lock",!1)},50))}function F(b,c){var d=b.find(".composite_data");"undefined"==typeof c&&(c=!1);var e=!0,f={},g=[],h=d.data("price_data"),i=d.data("bto_style"),k=d.data("progression_style"),l=d.find(".composite_wrap p.stock");if("undefined"!=typeof d.data("stock_status")?l.replaceWith(a(d.data("stock_status"))):l.remove(),("progressive"===i||"paged"===i)&&"strict"===k&&!b.find(".multistep").last().hasClass("active"))return G(b),!1;if(b.children(".component").each(function(){var b=a(this),c=b.attr("data-item_id");if("undefined"==typeof c)return!0;var i=d.find(".composite_wrap .composite_button .form_data_"+c),k=b.find("#component_options_"+c).val(),l=b.find(".component_wrap input.qty").val(),m=i.find("input.variation_input").val();h.prices[c]=parseFloat(b.find(".component_data").data("price")),h.regular_prices[c]=parseFloat(b.find(".component_data").data("regular_price")),h.addons_prices[c]=0,b.find(".addon").each(function(){var b=0;a(this).is(".addon-custom-price")?b=a(this).val():a(this).is(".addon-input_multiplier")?(isNaN(a(this).val())||""==a(this).val()?(a(this).val(""),a(this).closest("p").find(".addon-alert").show()):(""!=a(this).val()&&a(this).val(Math.ceil(a(this).val())),a(this).closest("p").find(".addon-alert").hide()),b=a(this).data("price")*a(this).val()):a(this).is(".addon-checkbox, .addon-radio")?a(this).is(":checked")&&(b=a(this).data("price")):a(this).is(".addon-select")?a(this).val()&&(b=a(this).find("option:selected").data("price")):a(this).val()&&(b=a(this).data("price")),b||(b=0),h.addons_prices[c]=parseFloat(h.addons_prices[c])+parseFloat(b)});var n=b.find(".component_data").data("product_type"),o=b.find(".component_content .component_wrap .out-of-stock");"undefined"==typeof n||""==n?e=!1:k>0||j(b)?o.length>0?(g.push(wc_composite_params.i18n_insufficient_item_stock.replace("%s",a("#component_options_"+c+" option:selected").data("title")).replace("%v",b.data("nav_title"))),e=!1):"none"!==n&&""===l?e=!1:"variable"!==n||"undefined"!=typeof m&&0!=b.find(".component_data").data("component_set")?"variable"!==n&&"simple"!==n&&"none"!==n&&0==b.find(".component_data").data("component_set")?e=!1:f[c]=l>0?parseInt(l):0:e=!1:e=!1}),n(b),e){if(0==h.per_product_pricing&&1==h.price_undefined)return G(b,wc_composite_params.i18n_unavailable_text),!1;if(1==h.per_product_pricing){h.total=0,h.regular_total=0;for(var m in h.prices)h.total+=(parseFloat(h.prices[m])+parseFloat(h.addons_prices[m]))*f[m],h.regular_total+=(parseFloat(h.regular_prices[m])+parseFloat(h.addons_prices[m]))*f[m];h.total+=parseFloat(h.base_price),h.regular_total+=parseFloat(h.base_regular_price)}else{h.total=parseFloat(h.base_price),h.regular_total=parseFloat(h.base_regular_price);for(var o in h.addons_prices)h.total+=parseFloat(h.addons_prices[o])*f[o],h.regular_total+=parseFloat(h.addons_prices[o])*f[o]}var p=d.find("#product-addons-total");if(p.length>0&&(p.data("price",h.total),d.trigger("woocommerce-product-addons-update")),0==h.total&&1==h.show_free_string)d.find(".composite_price").html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+wc_composite_params.i18n_free+"</p>");else{var q=J(K(h.total)),r=J(K(h.regular_total));d.find(".composite_price").html(h.regular_total>h.total?'<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span><del>"+r+"</del> <ins>"+q+"</ins></p>":'<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+q+"</p>")}var s=d.data("button_behaviour");"new"!==s?d.find(".composite_wrap").slideDown(200):d.find(".composite_button button").prop("disabled",!1).removeClass("disabled"),d.find(".composite_wrap").trigger("wc-composite-show-add-to-cart")}else{if(g.length>0){var t='<p class="stock out-of-stock">'+wc_composite_params.i18n_insufficient_stock+"</p>",u=0,v="";for(var w in g)u++,v=1==g.length||1==u?g[w]:wc_composite_params.i18n_insufficient_item_stock_comma_sep.replace("%s",v).replace("%v",g[w]);d.find(".composite_wrap p.stock").length>0?d.find(".composite_wrap p.stock").replaceWith(a(t.replace("%s",v))):d.find(".composite_wrap .composite_price").after(a(t.replace("%s",v)))}c||G(b)}var x=a(".widget_composite_summary_content");if(x.length>0){var y=d.find(".composite_wrap .composite_price").clone();x.append(y.addClass("cp_clearfix"))}}function G(a,b){var c=a.find(".composite_data"),d=c.data("button_behaviour");if("new"==d){if("undefined"==typeof b){var e=H(a);b=e?wc_composite_params.i18n_select_options.replace("%s",H(a)):""}c.find(".composite_price").html(b),c.find(".composite_button button").prop("disabled",!0).addClass("disabled")}else c.find(".composite_price").html(""),c.find(".composite_wrap").slideUp(200);c.find(".composite_wrap").trigger("wc-composite-hide-add-to-cart")}function H(b){var c=[],d="",e=b.find(".composite_data").data("progression_style");b.children(".component").each(function(){var b=a(this),d=b.find(".component_options select.component_options_select").val(),f=b.find(".component_data").data("component_set");if(!(d>0)&&!j(b)||"strict"==e&&b.hasClass("blocked")||0==f||"undefined"==typeof f){var g=b.data("nav_title");c.push(g)}});var f=c.length;if(f>0){var g=0;for(var h in c)g++,d=1==f||1==g?"&quot;"+c[h]+"&quot;":g==f?wc_composite_params.i18n_select_options_and_sep.replace("%s",d).replace("%v",c[h]):wc_composite_params.i18n_select_options_comma_sep.replace("%s",d).replace("%v",c[h])}return d}function I(b){"no"===wc_composite_params.is_wc_version_gte_2_3&&b.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />'),b.find(".component_wrap input.qty").each(function(){var b=parseFloat(a(this).attr("min"));b>=0&&parseFloat(a(this).val())<b&&a(this).val(b)})}function J(a){var b=wc_composite_params.currency_format_decimal_sep,c=wc_composite_params.currency_position,d=wc_composite_params.currency_symbol,e=wc_composite_params.currency_format_trim_zeros,f=wc_composite_params.currency_format_num_decimals;if("yes"==e&&f>0){for(var g=0;f>g;g++)b+="0";a=a.replace(b,"")}var h="";return"left"==c?h='<span class="amount">'+d+a+"</span>":"right"==c?h='<span class="amount">'+a+d+"</span>":"left_space"==c?h='<span class="amount">'+d+" "+a+"</span>":"right_space"==c&&(h='<span class="amount">'+a+" "+d+"</span>"),h}function K(a){var b=wc_composite_params.currency_format_num_decimals,c=wc_composite_params.currency_format_decimal_sep,d=wc_composite_params.currency_format_thousand_sep,e=a,f=isNaN(b=Math.abs(b))?2:b,g="undefined"==typeof c?",":c,h="undefined"==typeof d?".":d,i=0>e?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f))+"",k=(k=j.length)>3?k%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")}function L(a,b){var c=0,d=0,e=new Array;for(a.sort(),b.sort();c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}a("body").on("quick-view-displayed",function(){a(".composite_form .composite_data").each(function(){a(this).wc_composite_form()})}),a(window).resize(function(){a(".composite_form").each(function(){a(this).width()<=wc_composite_params.small_width_threshold?a(this).addClass("small_width"):a(this).removeClass("small_width"),a(this).width()>wc_composite_params.full_width_threshold?a(this).addClass("full_width"):a(this).removeClass("full_width"),wc_composite_params.legacy_width_threshold&&(a(this).width()<=wc_composite_params.legacy_width_threshold?a(this).addClass("legacy_width"):a(this).removeClass("legacy_width"))})}).trigger("resize");var M={};M="yes"===wc_composite_params.is_wc_version_gte_2_3?{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 )",opacity:.6}}:{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 ) url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}},a.fn.wc_composite_form=function(){if(!a(this).hasClass("composite_data"))return!0;a(".composite_add_to_cart_button").on("click",function(){a(this).closest(".composite_form").children(".component").each(function(){var b=a(this).attr("data-item_id");a(this).find('.variations_form .variations .attribute-options select, .variations_form .component_wrap input[name="variation_id"]').each(function(){a(this).attr("name",a(this).attr("name")+"_"+b)}),a(this).find("select, input").each(function(){a(this).prop("disabled",!1)})})}),a(this).on("woocommerce-nyp-updated-item",function(){var b=a(this).closest(".composite_form"),c=a(this).find(".nyp");if(c.length>0){var d=a(this).data("price_data");d.base_price=c.data("price"),d.price_undefined=!1,E(b,!0)}}),a(".component").on("wc-composite-component-loaded",function(){a.isFunction(a.fn.prettyPhoto)&&a(this).find('a[data-rel^="prettyPhoto"]').prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})}).on("woocommerce-product-addons-update",function(){var b=a(this).find(".addon");if(0==b.length)return!1;var c=a(this).closest(".composite_form");E(c,!0)}).on("woocommerce-nyp-updated-item",function(){var b=a(this),c=a(this).closest(".composite_form"),d=a(this).find(".cart .nyp");d.length>0&&"variable"!==b.find(".component_data").data("product_type")&&(b.find(".component_data").data("price",d.data("price")),b.find(".component_data").data("regular_price",d.data("price")),E(c,!0))}).on("woocommerce_variation_select_change",function(b){var c=a(this).find(".component_summary");k(a(this));var d=a(this),e=d.closest(".composite_form"),f=d.attr("data-item_id");e.find(".composite_data .composite_wrap .composite_button .form_data_"+f+" .variation_input").remove(),e.find(".composite_data .composite_wrap .composite_button .form_data_"+f+" .attribute_input").remove(),c.find(".component_data").data("component_set",!1),c.find(".composited_product_images").addClass("images"),a(this).find(".variations .attribute-options select").each(function(){return""===a(this).val()?(c.find(".component_wrap .single_variation").html(""),E(e),!1):void 0})}).on("woocommerce_variation_select_focusin",function(b){A(a(this))}).on("reset_image",function(b){var c=a(this).find(".component_summary");c.find(".composited_product_images").removeClass("images")}).on("found_variation",function(b,c){var d=a(this).find(".component_summary");k(a(this));var e=a(this),f=e.closest(".composite_form"),g=e.attr("data-item_id"),h='<input type="hidden" name="wccp_variation_id['+g+']" class="variation_input" value="'+c.variation_id+'"/>';f.find(".composite_data .composite_wrap .composite_button .form_data_"+g).append(h);for(var i in c.attributes){var j='<input type="hidden" name="wccp_'+i+"["+g+']" class="attribute_input" value="'+a(this).find('.variations .attribute-options select[name="'+i+'"]').val()+'"/>';f.find(".composite_data .composite_wrap .composite_button .form_data_"+g).append(j)}var l=f.find(".composite_data").data("price_data");1==l.per_product_pricing&&(d.find(".component_data").data("price",c.price),d.find(".component_data").data("regular_price",c.regular_price)),d.find(".component_data").data("component_set",!0),d.find(".composited_product_images").removeClass("images"),"yes"===c.is_sold_individually&&a(this).find(".component_wrap input.qty").val("1").change(),E(f)}).on("woocommerce-composited-product-update",function(b){var c=a(this).find(".component_summary");k(a(this));var d=a(this),e=d.closest(".composite_form"),f=e.find(".composite_data").data("price_data");if(1==f.per_product_pricing){var g=c.find(".component_data").data("price"),h=c.find(".component_data").data("regular_price");c.find(".component_data").data("price",g),c.find(".component_data").data("regular_price",h)}E(e)}).on("click",".clear_component_options",function(b){if(a(this).hasClass("reset_component_options"))return!1;var c=a(this).closest(".component"),d=c.find(".component_options select.component_options_select");return w(c),c.find(".component_option_thumbnails .selected").removeClass("selected"),d.val("").change(),!1}).on("click",".reset_component_options",function(b){var c=a(this).closest(".component"),d=c.closest(".composite_form"),e=d.find(".component").index(c),f=c.find(".component_options select.component_options_select");return w(c),c.find(".component_option_thumbnails .selected").removeClass("selected"),h(c),f.val("").change(),u(d,e),!1}).on("click",".block_component_selections_inner",function(b){
var c=a(this).closest(".component"),d=c.closest(".composite_form"),e=d.find(".component").index(c);return u(d,e),f(c),!1}).on("click",".component_option_thumbnail",function(b){var c=a(this).closest(".component");if(c.hasClass("disabled")||a(this).hasClass("disabled"))return!0;if(a(this).blur(),!a(this).hasClass("selected")){var d=a(this).data("val");a(this).closest(".component_options").find("select.component_options_select").val(d).change()}}).on("click","a.component_option_thumbnail_tap",function(b){return a(this).closest(".component_option_thumbnail").trigger("click"),!1}).on("focusin",".component_options select.component_options_select",function(b){A(a(this).closest(".component"))}).on("change",".component_options select.component_options_select",function(b){var c=a(this).closest(".component"),d=c.find(".component_selections"),e=c.find(".component_content"),f=c.find(".component_summary"),h=c.find(".component_summary > .content"),i=c.attr("data-item_id"),j=c.closest(".composite_form"),l=j.find(".composite_data").data("container_id"),m=j.find(".composite_data .composite_wrap .composite_button .form_data_"+i),o=j.find(".composite_data").data("bto_style"),p="";p="paged"===o?j.find(".scroll_select_component_option"):c.next(".component");var q=f.outerHeight(),r=0,s=!1;a(this).blur(),m.find(".variation_input").remove(),m.find(".attribute_input").remove(),c.find(".component_option_thumbnails .selected").removeClass("selected disabled"),c.find("#component_option_thumbnail_"+a(this).val()).addClass("selected");var t={action:"woocommerce_show_composited_product",product_id:a(this).val(),component_id:i,composite_id:l,security:wc_composite_params.show_product_nonce};h.removeClass("variations_form bundle_form cart"),e.off().find("*").off(),""!==t.product_id?(d.addClass("blocked_content").block(M),j.addClass("updating"),a.post(woocommerce_params.ajax_url,t,function(b){try{"yes"===b.product_data.purchasable?(e.css("height",q),h.html(b.markup),I(c),g(c),A(c),k(c),E(j),c.trigger("wc-composite-component-loaded"),e.css("height","auto"),r=f.outerHeight(),Math.abs(r-q)>1&&(s=!0,e.css("height",q))):(e.css("height",q),h.html(b.markup),A(c),k(c),n(j),G(j))}catch(i){console.log(i),e.css("height",q),h.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),A(c),k(c),G(j)}window.setTimeout(function(){if(s)e.css("height","auto"),r=f.outerHeight(),Math.abs(r-q)>1&&(s=!0,e.css("height",q)),e.animate({height:r},{duration:200,queue:!1,always:function(){if(p.length>0&&!p.is_in_viewport(!0)){var b=0;b="paged"===o?p.hasClass("scroll_bottom")?a(window).height()-80:50:a(window).height()-70,a("html, body").animate({scrollTop:p.offset().top-b},{duration:200,queue:!1,always:function(){e.css({height:"auto"}),d.unblock().removeClass("blocked_content"),j.removeClass("updating")}})}else e.css({height:"auto"}),d.unblock().removeClass("blocked_content"),j.removeClass("updating")}});else if(p.length>0&&!p.is_in_viewport(!0)){var b=0;b="paged"===o?p.hasClass("scroll_bottom")?a(window).height()-80:50:a(window).height()-70,a("html, body").animate({scrollTop:p.offset().top-b},{duration:200,queue:!1,always:function(){d.unblock().removeClass("blocked_content"),j.removeClass("updating")}})}else d.unblock().removeClass("blocked_content"),j.removeClass("updating")},250)},"json")):(e.css("height",q),h.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),A(c),k(c),E(j),e.animate({height:f.outerHeight()},{duration:200,queue:!1,always:function(){e.css({height:"auto"})}}))}).on("click",".component_pagination a.component_pagination_element",function(b){var c=a(this).closest(".component"),f=c.attr("data-item_id"),g=c.find(".component_options"),h=c.find(".component_ordering select"),i=c.closest(".composite_form"),j=parseInt(a(this).data("page_num")),k=g.find("select.component_options_select").val(),l=i.find(".composite_data").data("container_id"),m=d(c),n={action:"woocommerce_show_component_options",load_page:j,component_id:f,composite_id:l,selected_option:k,filters:m,security:wc_composite_params.show_product_nonce};return h.length>0&&(n.orderby=h.val()),n.load_page>0&&(a(this).blur(),e(c,n)),!1}).on("change",".component_ordering select",function(b){var c=a(this).closest(".component"),f=c.attr("data-item_id"),g=c.find(".component_options"),h=c.closest(".composite_form"),i=g.find("select.component_options_select").val(),j=h.find(".composite_data").data("container_id"),k=a(this).val(),l=d(c),m={action:"woocommerce_show_component_options",load_page:1,component_id:f,composite_id:j,selected_option:i,orderby:k,filters:l,security:wc_composite_params.show_product_nonce};return a(this).blur(),e(c,m),!1}).on("click",".component_filter_option a",function(b){var f=a(this).closest(".component"),g=f.attr("data-item_id"),h=f.find(".component_options"),i=f.find(".component_ordering select"),j=f.closest(".composite_form"),k=a(this).closest(".component_filter_option"),l=h.find("select.component_options_select").val(),m=j.find(".composite_data").data("container_id"),n={};k.hasClass("selected")?k.removeClass("selected"):k.addClass("selected"),c(f),n=d(f);var o={action:"woocommerce_show_component_options",load_page:1,component_id:g,composite_id:m,selected_option:l,filters:n,security:wc_composite_params.show_product_nonce};return i.length>0&&(o.orderby=i.val()),a(this).blur(),e(f,o),!1}).on("click",".component_filters a.reset_component_filters",function(b){var d=a(this).closest(".component"),f=d.attr("data-item_id"),g=d.find(".component_options"),h=d.find(".component_ordering select"),i=d.closest(".composite_form"),j=d.find(".component_filters .component_filter_option.selected");if(0==j.length)return!1;var k=g.find("select.component_options_select").val(),l=i.find(".composite_data").data("container_id"),m={};j.removeClass("selected"),c(d);var n={action:"woocommerce_show_component_options",load_page:1,component_id:f,composite_id:l,selected_option:k,filters:m,security:wc_composite_params.show_product_nonce};return h.length>0&&(n.orderby=h.val()),a(this).blur(),e(d,n),!1}).on("click",".component_filters a.reset_component_filter",function(b){var f=a(this).closest(".component"),g=f.attr("data-item_id"),h=f.find(".component_options"),i=f.find(".component_ordering select"),j=f.closest(".composite_form"),k=a(this).closest(".component_filter").find(".component_filter_option.selected");if(0==k.length)return!1;var l=h.find("select.component_options_select").val(),m=j.find(".composite_data").data("container_id"),n={};k.removeClass("selected"),c(f),n=d(f);var o={action:"woocommerce_show_component_options",load_page:1,component_id:g,composite_id:m,selected_option:l,filters:n,security:wc_composite_params.show_product_nonce};return i.length>0&&(o.orderby=i.val()),a(this).blur(),e(f,o),!1}).on("click",".component_filter_title label",function(b){var c=a(this).closest(".component_filter"),d=c.find(".component_filter_content");return r(c,d),a(this).blur(),!1}).on("click",".component_title",function(b){var c=a(this).closest(".component"),d=c.find(".component_inner");return!c.hasClass("toggled")||a(this).hasClass("inactive")?!1:c.hasClass("progressive")&&c.hasClass("active")?!1:(r(c,d),c.hasClass("progressive")&&c.hasClass("blocked")&&window.setTimeout(function(){l.find(".page_button.next").click()},200),a(this).blur(),!1)}).on("change",".component_wrap input.qty",function(b){var c=a(this).closest(".composite_form"),d=parseFloat(a(this).attr("min")),e=parseFloat(a(this).attr("max"));d>=0&&parseFloat(a(this).val())<d&&a(this).val(d),e>0&&parseFloat(a(this).val())>e&&a(this).val(e),E(c)}),a(".composite_navigation").on("click",".page_button",function(b){var c=a(this).closest(".composite_form"),d=c.find(".multistep.next"),e=c.find(".multistep.prev");if(a(this).hasClass("next"))if(d.hasClass("multistep"))f(d);else{var g=c.find(".scroll_final_step");if(g.length>0){var h=g.hasClass("scroll_bottom")?a(window).height()-80:80;a("html, body").animate({scrollTop:g.offset().top-h},200)}else f(c.find(".multistep.cart"))}else e.hasClass("multistep")&&f(e);return!1}),a(".composite_pagination").on("click",".pagination_element a",function(b){var c=a(this).closest(".composite_form");if(a(this).hasClass("inactive")||c.hasClass("updating"))return!1;var d=a(this).closest(".pagination_element").data("item_id"),e=c.children('.multistep[data-item_id="'+d+'"]');return f(e),!1}),a(".composite_summary").on("click",".summary_element_link",function(b){var c=a(this).closest(".composite_form"),d=a(this).closest(".composite_summary");if(d.hasClass("widget_composite_summary")){var e=d.find(".widget_composite_summary_content").data("container_id");c=a("#composite_data_"+e).closest(".composite_form")}if(a(this).hasClass("disabled")||c.hasClass("updating"))return!1;var g=d.find(".summary_element").index(a(this).closest(".summary_element")),h=c.children(".multistep.component:eq("+g+")");return h.hasClass("progressive")&&u(c,g),h.hasClass("active")||f(h),!1}).on("click","a.summary_element_tap",function(b){return a(this).closest(".summary_element_link").trigger("click"),!1}),a(this).find(".composite_wrap p.stock").length>0&&this.data("stock_status",a(this).find(".composite_wrap p.stock").clone().wrap("<div>").parent().html());var b=a(this).find("#product-addons-total");a(this).find(".composite_price").after(b),a(this).find(".nyp").trigger("woocommerce-nyp-updated-item");var i=a(this).data("bto_style"),j=a(this).data("bto_style_variation"),l=a(this).closest(".composite_form");"paged"===i&&("componentized"===j?(l.find(".multistep.active").removeClass("active"),a(this).addClass("multistep active"),l.find(".composite_pagination .pagination_element_review").remove(),a(".widget_composite_summary").hide()):a(this).prev().hasClass("multistep")?(a(this).addClass("multistep"),a(this).hide()):l.find(".composite_pagination .pagination_element_review").remove()),"progressive"===i&&l.find(".toggled:not(.active) .component_title").addClass("inactive"),a(this).trigger("wc-composite-initialization"),l.find(".component").each(function(b){var c=a(this);g(c),c.trigger("wc-composite-component-loaded")}),l.find(".composite_data").data("composite_initialized",!0),l.css("visibility","visible");var m;"paged"===i||"progressive"===i?(m=l.find(".multistep.active"),f(m,!1),E(l)):(m=l.find(".component.first"),h(m),A(m),E(l)),l.find(".component").each(function(b){a(this).trigger("wc-composite-component-options-loaded")})},a.fn.is_in_viewport=function(b,c,d){var e=a(window);if(!(this.length<1)){var f=this.length>1?this.eq(0):this,g=f.get(0),h=e.width(),i=e.height(),d=d?d:"both",j=c===!0?g.offsetWidth*g.offsetHeight:!0;if("function"==typeof g.getBoundingClientRect){var k=g.getBoundingClientRect(),l=k.top>=0&&k.top<i,m=k.bottom>0&&k.bottom<=i,n=k.left>=0&&k.left<h,o=k.right>0&&k.right<=h,p=b?l||m:l&&m,q=b?n||o:n&&o;if("both"===d)return j&&p&&q;if("vertical"===d)return j&&p;if("horizontal"===d)return j&&q}else{var r=e.scrollTop(),s=r+i,t=e.scrollLeft(),u=t+h,v=f.offset(),w=v.top,x=w+f.height(),y=v.left,z=y+f.width(),A=b===!0?x:w,B=b===!0?w:x,C=b===!0?z:y,D=b===!0?y:z;if("both"===d)return!!j&&s>=B&&A>=r&&u>=D&&C>=t;if("vertical"===d)return!!j&&s>=B&&A>=r;if("horizontal"===d)return!!j&&u>=D&&C>=t}}},a(".composite_form .composite_data").each(function(){a(this).wc_composite_form()})});